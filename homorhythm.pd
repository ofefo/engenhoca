#N canvas 2 54 1916 1000 12;
#X obj 71 290 spigot;
#X obj 71 313 outlet;
#X obj 71 4 inlet onset;
#X obj 2 4 inlet sel;
#X obj 71 264 list store;
#X obj 156 4 inlet pc_set;
#X obj 234 124 list store;
#N canvas 1282 54 636 1000 octave 0;
#X obj 20 19 inlet pc;
#X obj 20 95 expr $f1+(($f2+1)*12);
#X obj 20 120 outlet;
#X obj 164 19 inlet oct_prob;
#X obj 164 43 t b l, f 12;
#X obj 164 68 list-wrandom;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 5 1;
#X connect 5 0 1 1;
#X restore 234 173 pd octave;
#X obj 350 4 inlet ioi_mean;
#X obj 579 4 inlet rms;
#X obj 432 171 f;
#X obj 209 198 pack;
#X obj 454 4 inlet legato_mean;
#X obj 246 4 inlet oct_prob;
#N canvas 962 54 956 1000 timbre 0;
#X obj 13 13 inlet bang;
#X obj 92 13 inlet ioi_mean;
#X obj 13 38 f 0;
#X obj 13 63 + 1;
#X obj 13 88 %;
#X obj 13 113 sel 0;
#X obj 13 165 outlet;
#X obj 92 38 expr if($f1 < 400 \, 30 \, rint(1000 / ($f1/12.)));
#X obj 13 139 random 11;
#X text 15 183 The frequency at which a new timbre is chosen varies
according to the mean duration found in the last phrase.;
#X connect 0 0 2 0;
#X connect 1 0 7 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 7 0 4 1;
#X connect 8 0 6 0;
#X restore 143 100 pd timbre;
#X obj 323 81 f;
#X obj 2 239 == 0;
#X obj 648 4 inlet flat_curve;
#N canvas 962 54 956 1000 make_list 0;
#X obj 14 11 inlet list;
#X obj 14 59 list trim;
#X obj 14 83 outlet;
#X obj 14 35 list prepend flat;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X restore 648 27 pd make_list;
#X obj 432 195 list;
#X obj 298 218 list;
#X obj 298 244 list;
#X text 149 271 This abstraction concatenates values for timbre \,
pitch \, duration \, amplitude (rms) and flatness curve into a single
list.;
#X obj 234 149 pick-random;
#X obj 389 225 list;
#X obj 71 30 t b b b b b b, f 52;
#X obj 389 195 f;
#X connect 0 0 1 0;
#X connect 2 0 25 0;
#X connect 3 0 16 0;
#X connect 4 0 0 0;
#X connect 5 0 6 1;
#X connect 6 0 23 0;
#X connect 7 0 11 1;
#X connect 8 0 15 1;
#X connect 9 0 10 1;
#X connect 10 0 19 0;
#X connect 11 0 20 0;
#X connect 12 0 26 1;
#X connect 13 0 7 1;
#X connect 14 0 11 0;
#X connect 15 0 14 1;
#X connect 15 0 20 1;
#X connect 16 0 0 1;
#X connect 17 0 18 0;
#X connect 18 0 19 1;
#X connect 19 0 24 1;
#X connect 20 0 21 0;
#X connect 21 0 4 1;
#X connect 23 0 7 0;
#X connect 24 0 21 1;
#X connect 25 0 4 0;
#X connect 25 1 14 0;
#X connect 25 2 6 0;
#X connect 25 3 15 0;
#X connect 25 4 26 0;
#X connect 25 5 10 0;
#X connect 26 0 24 0;
